import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Docker

<Tabs>
  <TabItem value="tp" label="TP (Installation et Cr√©ation des Conteneurs)" default>

    ## Objectifs de cette documentation

    Cette documentation a pour but de vous guider dans l'utilisation de Docker en abordant les points suivants :

    - Installer Docker sur votre machine
    - Installer une premi√®re image Docker
    - Lancer un conteneur
    - D√©ployer une application avec un conteneur Docker (exemple avec NGINX)
    - Utiliser VS Code dans un conteneur Docker

    > **‚ö†Ô∏è Note :** Les commandes Docker n√©cessitent souvent des privil√®ges superutilisateur (root). Pensez √† ex√©cuter les commandes en tant que root ou utilisez `sudo` si n√©cessaire.

    ## üöÄ Installation de Docker

    Pour installer Docker sur votre machine, ex√©cutez la commande suivante :

    ```bash
    apt install docker.io
    ```

    Une fois Docker install√©, vous pouvez v√©rifier que le service fonctionne avec :

    ```bash
    systemctl start docker
    systemctl enable docker
    ```

    Cela va d√©marrer le service Docker et l'activer au d√©marrage du syst√®me.

    ## üåê T√©l√©chargement et lancement de NGINX

    ### T√©l√©chargement de l'image NGINX

    Pour t√©l√©charger l'image Docker de NGINX (ici, la version stable bas√©e sur Alpine Linux), ex√©cutez la commande suivante :

    ```bash
    docker pull nginx
    ```

    ### V√©rification des images Docker

    Une fois l'image t√©l√©charg√©e, vous pouvez v√©rifier les images disponibles sur votre machine avec la commande suivante :

    ```bash
    docker image ls
    ```

    Cette commande listera toutes les images Docker install√©es localement.

    ### Lancement du conteneur NGINX

    Pour d√©marrer un conteneur bas√© sur l'image NGINX que vous venez de t√©l√©charger, utilisez cette commande. Le nom du conteneur sera **web1** :

    ```bash
    docker run --name web1 -d -p 80:80 nginx
    ```

    Voici une explication des options utilis√©es :

    - `--name web1` : Attribue le nom **web1** au conteneur.
    - `-d` : Lance le conteneur en mode d√©tach√© (en arri√®re-plan).
    - `-p 80:80` : Mappe le port 80 de l'h√¥te (votre machine) au port 80 du conteneur, permettant l'acc√®s via un navigateur.

    > Pour v√©rifier que le conteneur fonctionne, ouvrez un navigateur et tapez l'adresse IP de votre machine. Vous devriez voir la page par d√©faut de NGINX.

    ### Gestion des conteneurs

    Voici quelques commandes pratiques pour g√©rer le conteneur **web1** :

    - **Voir les conteneurs actifs** :

      ```bash
      docker ps
      ```

    - **Arr√™ter le conteneur** :

      ```bash
      docker stop web1
      ```

    - **Red√©marrer le conteneur** :

      ```bash
      docker start web1
      ```

    - **Supprimer le conteneur** (une fois qu'il est arr√™t√©) :

      ```bash
      docker rm web1
      ```

    ## üíª Mise en place de VS Code dans Docker

    Docker peut √©galement √™tre utilis√© pour ex√©cuter un environnement de d√©veloppement, tel que VS Code. Voici comment mettre en place un serveur VS Code dans un conteneur.

    ### T√©l√©chargement de l'image VS Code

    T√©l√©chargez l'image Docker de VS Code avec cette commande :

    ```bash
    docker pull lscr.io/linuxserver/code-server:latest
    ```

    ### Lancement du conteneur VS Code

    Lancez le serveur VS Code avec les options suivantes, en nommant le conteneur **vscode-server** :

    ```bash
    docker run -d --name=vscode-server -e PUID=1000 -e PGID=1000 -e TZ=Etc/UTC -e PASSWORD="test" -p 8443:8443 lscr.io/linuxserver/code-server:latest
    ```

    Explication des options :

    - `--name=vscode-server` : Attribue le nom **vscode-server** au conteneur.
    - `-e PUID=1000` et `-e PGID=1000` : D√©finit les identifiants utilisateur et groupe (peut √™tre ajust√© selon votre configuration).
    - `-e TZ=Etc/UTC` : D√©finit le fuseau horaire (modifiable selon vos besoins).
    - `-e PASSWORD="test"` : D√©finit un mot de passe d'acc√®s au serveur VS Code.
    - `-p 8443:8443` : Mappe le port 8443 de l'h√¥te au port 8443 du conteneur (assurez-vous que le port 8443 est libre sur votre machine).

    ### Acc√®s √† VS Code

    Pour acc√©der √† VS Code dans Docker, ouvrez un navigateur et tapez l'adresse IP de votre machine suivie du port 8443. Par exemple :

    ```
    http://<votre-ip>:8443
    ```

    Entrez ensuite le mot de passe que vous avez d√©fini (dans cet exemple, "test").
  </TabItem>

  <TabItem value="cours" label="Cours (Commandes)">

    ## R√©sum√© des commandes essentielles

    Voici un r√©sum√© des principales commandes Docker utilis√©es dans cette documentation :

    - **T√©l√©charger une image** : 

      ```bash
      docker pull <nom_image>
      ```

    - **Lister les images** : 

      ```bash
      docker image ls
      ```

    - **Lancer un conteneur avec un nom impos√©** : 

      ```bash
      docker run --name <nom_conteneur> [options] <nom_image>
      ```

    - **V√©rifier les conteneurs actifs** : 

      ```bash
      docker ps
      ```

    - **Arr√™ter un conteneur** : 

      ```bash
      docker stop <nom_conteneur>
      ```

    - **D√©marrer un conteneur** : 

      ```bash
      docker start <nom_conteneur>
      ```

    - **Supprimer un conteneur** : 

      ```bash
      docker rm <nom_conteneur>
      ```

    ### Informations Compl√©mentaires

    Docker est un outil puissant qui permet de cr√©er, d√©ployer et ex√©cuter des applications dans des conteneurs. Les conteneurs sont l√©gers et portables, ce qui permet aux d√©veloppeurs de cr√©er des environnements de d√©veloppement et de production de mani√®re coh√©rente.

    Pour plus d'informations, consultez la [documentation officielle de Docker](https://docs.docker.com/).

  </TabItem>
</Tabs>